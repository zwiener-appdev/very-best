<html lang="en">
<head>
  <meta charset="utf-8">
  <title>VeryBest</title>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" crossorigin="anonymous">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

  <style>
    /* Only necessary if you are using navbar-fixed-top */
    body {
      padding-top: 60px;
    }
  </style>

  <%= stylesheet_link_tag    "application", :media => "all" %>
  <%= javascript_include_tag "application" %>
  <%= csrf_meta_tags %>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" crossorigin="anonymous"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
</head>
<body>
  <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
    <div class="container">
      <a class="navbar-brand" href="/">VeryBest</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item"><a class="nav-link active" href="/dishes">Dishes</a></li>
          <li class="nav-item"><a class="nav-link" href="/venues">Venues</a></li>
        </ul>
        <ul class="navbar-nav ml-auto">
          <% if current_user.present? %>
            <li class="nav-item active">
              <a class="nav-link" href="/users/edit">
                <%= current_user.username %>
              </a>
            </li>

            <li class="nav-item active">
              <a class="nav-link" href="/users/sign_out" data-method="delete" rel="nofollow">
                Sign Out
              </a>
            </li>
          <% else %>
            <li class="nav-item active">
              <a class="nav-link" href="/users/sign_up">
                Sign Up
              </a>
            </li>

            <li class="nav-item active">
              <a class="nav-link" href="/users/sign_in">
                Sign In
              </a>
            </li>
          <% end %>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container">
    <% if notice.present? %>
      <div class="alert alert-dismissable alert-success">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <%= notice %>
      </div>
    <% end %>

    <% if alert.present? %>
      <div class="alert alert-dismissable alert-warning">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        <%= alert %>
      </div>
    <% end %>

    <%= yield %>

    <%= dev_tools if Rails.env.development? %>
  </div>
</body>
</html>



<div class="container mt-4">
  <div class="row mt-2 mb-1">
    <div class="col-md-3">
      


      <%= search_form_for @q, :class => "collapse", :id => "dishes_filters" do |f| %>
        <p class="lead">Narrow results:</p>

        <div class="form-group">
          <%= f.label :name_cont, "Name contains" %>
          <%= f.text_field :name_cont, :class => "form-control", :placeholder => "Name contains" %>
        </div>

        <div class="form-group">
          <%= f.label :cuisine_name_cont, "Cuisine name contains" %>
          <%Cuisine.all.each do |cuisine| %>
            <div for="cuisine_type">
              <label>
                <input type="checkbox" name="q[cuisine_id_eq_any][]" id="q_cuisine_id_eq_any_" value="<%=cuisine.id%>">
              </label>
              <%=cuisine.name%>
            </div>
          <%end%>
        </div>

          <%= f.submit :class => "btn btn-primary btn-block mb-1" %>

          <a href="/dishes" class="btn btn-secondary btn-block mb-1">Clear filters</a>
        <% end %>
        <a class="btn btn-secondary btn-block mb-1 collapsed" data-toggle="collapse" href="#dishes_filters" aria-expanded="false">
          Show Filters
        </a>
        </div>


    <div class="col-md-6">
      <div class="card">
        <table class="table table-striped table-hover">
          <tr>
            <th>The very best...</th>
            <th>is at...</th>
            <th></th>
          </tr>

        <% @dishes.each do |food| %>
          <tr>
            <td><a href="/dishes/<%=food.id %>"><%= food.name %></a></td>
            <td>
                
                <form action="/create_bookmark" class="form-inline" method="post" id="bookmark_form">
                  <input type="hidden" name="dish_id" value=<%=food.id%>>
                  <input type="hidden" name="user_id" value=<%=current_user.id %>>
                  <select name="venue_id" form="bookmark_form">
                    <%Venue.all.each do |place|%>
                    <option value="<%=place.id%>" name="venue_id"><%=place.name%></option>
                    <%end%>
                    <option value="" selected disabled hidden>Choose a venue...</option>
                  </select>
                  
                  <button class="btn btn-primary btn-sm">
                    <i class="fa fa-heart"></i>
                  </button>
                </form>
            </td>
            <td class="text-right">
              <span class="badge badge-primary">
                <% if food.cuisine.present? %>
                <%= food.cuisine.name %>
                <% end %>
              </span>
            </td>
          </tr>
        <% end %>
        </table>
      </div>
    </div>
    
    <div class="col-md-3">
        <a href="/venues/new" class="btn btn-lg btn-success">Add a new venue</a>
    </div>
  </div>
</div>
